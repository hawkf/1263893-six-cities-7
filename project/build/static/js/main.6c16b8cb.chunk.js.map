{"version":3,"sources":["browser-history.jsx","store/action.js","store/middlewares/redirect.js","services/api.js","components/card/card-mark.jsx","components/card/card.prop.js","utils/offer.js","const.js","utils/comment.js","components/bookmark-button/bookmark-button.jsx","store/api-actions.js","components/card/card.jsx","utils/common.js","store/offers-data/offers-data.js","store/user/user.js","store/form-process/form-process.js","store/root-reducer.js","store/offers-data/selectors.js","components/empty-list/empty-list.jsx","components/card/card-list.jsx","components/logo/logo.jsx","hooks/useMap.js","components/map/map.jsx","components/cities-menu/cities-menu.jsx","components/offer-sort-form/offers-sort-form.jsx","components/main-page/offers-description.jsx","store/user/selectors.js","components/main-page/sign-in-out.jsx","components/main-page/user-name.jsx","components/main-page/main-page.jsx","components/comment-form/rating-input.jsx","store/form-process/selectors.js","components/comment-form/comment-form.jsx","components/loading-screen/loading-screen.jsx","components/offer-screen/offer-screen.prop.js","components/offer-screen/reviews-item.jsx","components/comments-list.jsx/comments-list.jsx","components/card/near-place-card.jsx","components/nearby-offers-list/nearby-offers-list.jsx","components/offer-screen/offer-screen.jsx","components/not-found-screen/not-found-screen.jsx","components/favorites-screen/empty-favorite-list.jsx","components/card/favorite-card.jsx","components/favorites-screen/favorites-list.jsx","components/favorites-screen/favorites-screen.jsx","components/auth-screen/auth-screen.jsx","components/private-route-favorites/private-route-favorites.jsx","components/private-route-login/private-route-login.jsx","components/app/app.jsx","index.js"],"names":["browserHistory","createBrowserHistory","ActionType","changeCity","createAction","cityName","payload","setDefaultCityFilter","changeActiveOfferId","offerId","changeFavoritesState","offer","loadOffers","offers","requireAuthorization","status","outLog","redirectToRoute","url","setUserEmail","email","setOpenedOffer","loadComments","comments","sendComment","loadOffersNearBy","offersNearBy","setSortType","sortType","redirect","_store","next","action","type","push","HttpCode","onRequest","config","headers","localStorage","getItem","CardMark","isPremium","className","PropTypes","shape","id","string","isRequired","location","latitude","number","longitude","isFavorite","bool","images","arrayOf","description","bedrooms","maxAdults","goods","host","avatarUrl","isPro","name","cardImage","price","rating","title","transformRating","result","Math","round","sortByDate","commentA","commentB","dayjs","date","diff","sortPriceHighToLow","offerA","offerB","sortPriceLowToHigh","sortRatingTop","humanizeCommentDate","format","updateOfferToClient","updatedOffer","Object","assign","toString","city","cityLocation","AppRoute","CITIES","AuthorizationStatus","APIRoute","SortType","POPULAR","PRICE_LOW_TO_HIGH","PRICE_HIGH_TO_LOW","TOP_RATED_FIRST","updateCommentToClient","comment","user","BookMarkButton","props","useState","setIsFavorite","dispatch","useDispatch","onClick","_getState","api","post","then","data","catch","children","Card","history","useHistory","OFFER_PAGE","ratingWidth","onMouseAction","onMouseOver","onMouseOut","to","src","width","height","alt","xlinkHref","style","getOffersByCity","allOffers","filter","DEFAULT_CITY","initialState","offersNearby","openedOffer","activeOfferId","isDataLoaded","offersData","createReducer","builder","addCase","state","findIndex","element","authorizationStatus","userEmail","formProcess","isCommentFormSending","NameSpace","combineReducers","getCity","get","getOffers","getOffersNearBy","getOpenedOffer","getActiveOfferId","getIsDataLoaded","getSortType","EmptyList","CardList","sortedOffers","useSelector","slice","sort","map","Logo","useMap","mapRef","setMap","useEffect","current","instance","leaflet","center","lat","lng","zoom","tileLayer","attribution","addTo","Map","useRef","defaultIcon","icon","iconUrl","iconSize","iconAnchor","currentIcon","markers","layerGroup","forEach","marker","flyTo","clearLayers","ref","CitiesMenu","cityActive","item","OffersSortForm","isOptionListOpened","setIsOptionListOpened","sortTypeKeys","keys","method","marginRight","tabIndex","key","OffersDescription","filteredOffers","isSingleOffer","length","getAuthorizationStatus","getUserEmail","SignInOut","delete","removeItem","UserName","MainPage","isOffersEmpty","RatingInput","onRatingChangeHandle","value","inputStar","checked","onChange","disabled","htmlFor","getComments","getIsCommentFormSending","CommentForm","setRating","text","setText","sendFormData","onFailAction","onFailSendComment","postComment","isFormReadyToSend","String","trim","onSubmit","evt","preventDefault","swal","target","placeholder","LoadingScreen","ReviewsItem","commentItem","ratingForStyle","dateTime","CommentsList","onFailHandle","onFail","fetchComments","resultComments","NearPlaceCard","NearbyOffersList","Array","isArray","OfferScreen","useParams","fetchOffer","setActiveOffer","fetchOffersNearBy","loadComentsToState","offersMap","concat","isAuthorized","image","nanoid","good","NotFoundScreen","href","EmptyFavoriteList","FavoriteCard","getCityFavoriteOffers","favoriteOffers","FavoritesList","cityNames","from","Set","FavoritesScreen","isEmptyFavoriteOffers","AuthScreen","password","setPassword","loginRef","authData","login","setItem","token","required","PrivateRouteFavorites","render","path","exact","routeProps","PrivateRouteLogin","App","isCheckedAuth","onUnauthorized","axios","create","baseURL","timeout","interceptors","request","use","response","err","createApi","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","thunk","extraArgument","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6c16b8cb.chunk.js","sourcesContent":["import {createBrowserHistory} from 'history';\n\nconst browserHistory = createBrowserHistory();\n\nexport default browserHistory;\n","import {createAction} from '@reduxjs/toolkit';\n\nexport const ActionType = {\n  CHANGE_CITY: 'six-cities/changeCity',\n  SET_DEFAULT_CITY_FILTER: 'six-cities/setDefaultCityFilter',\n  CHANGE_ACTIVE_OFFER_ID: 'six-cities/changeActiveOfferId',\n  LOAD_OFFERS: 'data/loadOffers',\n  CHANGE_FAVORITES: 'data/changeFavorites',\n  REQUIRED_AUTHORIZATION: 'user/requiredAuthorization',\n  LOGOUT: 'user/logout',\n  REDIRECT_TO_ROUTE: 'six-cities/redirectToRoute',\n  SET_USER_EMAIL: 'six-cities/setUserEmail',\n  SET_OPENED_OFFER: 'data/setOpenedOffer',\n  LOAD_COMMENTS: 'data/loadComments',\n  SEND_COMMENT: 'data/sendComment',\n  LOAD_OFFERS_NEARBY: 'data/loadOffersNearBy',\n  SET_SORT_TYPE: 'data/setSortType',\n};\n\nexport const changeCity = createAction(ActionType.CHANGE_CITY, (cityName) => ({\n  payload: cityName,\n}));\n\nexport const setDefaultCityFilter = createAction(ActionType.SET_DEFAULT_CITY_FILTER);\n\nexport const changeActiveOfferId = createAction(ActionType.CHANGE_ACTIVE_OFFER_ID, (offerId) => ({\n  payload: offerId,\n}));\n\nexport const changeFavoritesState =createAction(ActionType.CHANGE_FAVORITES, (offer) => ({\n  payload: offer,\n}));\n\nexport const loadOffers = createAction(ActionType.LOAD_OFFERS, (offers) => ({\n  payload: offers,\n}));\n\nexport const requireAuthorization = createAction(ActionType.REQUIRED_AUTHORIZATION, (status) => ({\n  payload: status,\n}));\n\nexport const outLog = createAction(ActionType.LOGOUT);\n\nexport const redirectToRoute = createAction(ActionType.REDIRECT_TO_ROUTE, (url) => ({\n  payload: url,\n}));\n\nexport const setUserEmail = createAction(ActionType.SET_USER_EMAIL, (email) => ({\n  payload: email,\n}));\n\nexport const setOpenedOffer = createAction(ActionType.SET_OPENED_OFFER, (offer) => ({\n  payload: offer,\n}));\n\nexport const loadComments = createAction(ActionType.LOAD_COMMENTS, (comments) => ({\n  payload: comments,\n}));\n\nexport const sendComment = createAction(ActionType.SEND_COMMENT, (status) => ({\n  payload: status,\n}));\n\nexport const loadOffersNearBy = createAction(ActionType.LOAD_OFFERS_NEARBY, (offersNearBy) => ({\n  payload: offersNearBy,\n}));\n\nexport const setSortType = createAction(ActionType.SET_SORT_TYPE, (sortType) => ({\n  payload: sortType,\n}));\n","import browserHistory from '../../browser-history';\nimport {ActionType} from '../action';\n\nexport const redirect = (_store) => (next) => (action) => {\n  if (action.type === ActionType.REDIRECT_TO_ROUTE) {\n    browserHistory.push(action.payload);\n  }\n\n  return next(action);\n};\n","import axios from 'axios';\n\nconst BACKEND_URL = 'https://7.react.pages.academy/six-cities';\nconst REQUEST_TIMEOUT = 5000;\n\nconst HttpCode = {\n  UNAUTHORIZED: 401,\n};\n\nconst onRequest = (config) => {\n  config.headers = {\n    ...config.headers,\n    'x-token': localStorage.getItem('token') ?? '',\n  };\n\n  return config;\n};\n\nexport const createApi = (onUnauthorized) => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n  });\n\n  const onSuccess = (response) => response;\n\n  const onFail = (err) => {\n    const {response} = err;\n\n    if (response.status === HttpCode.UNAUTHORIZED) {\n      onUnauthorized();\n    }\n\n    throw err;\n  };\n\n  api.interceptors.request.use(onRequest);\n  api.interceptors.response.use(onSuccess, onFail);\n\n  return api;\n};\n","import React from 'react';\n\nexport default function CardMark(isPremium) {\n  if(isPremium === false) {\n    return null;\n  }\n\n  return (\n    <div className=\"place-card__mark\">\n      <span>Premium</span>\n    </div>\n  );\n}\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  cityName: PropTypes.string.isRequired,\n  location: PropTypes.shape({\n    latitude: PropTypes.number.isRequired,\n    longitude: PropTypes.number.isRequired,\n  }),\n  isFavorite: PropTypes.bool.isRequired,\n  images: PropTypes.arrayOf(\n    PropTypes.string.isRequired,\n  ),\n  description: PropTypes.string.isRequired,\n  bedrooms: PropTypes.number.isRequired,\n  maxAdults: PropTypes.number.isRequired,\n  goods: PropTypes.arrayOf(\n    PropTypes.string.isRequired,\n  ),\n  host: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    isPro: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n  cardImage: PropTypes.string.isRequired,\n  price: PropTypes.number.isRequired,\n  rating: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  isPremium: PropTypes.bool.isRequired,\n});\n","import dayjs from 'dayjs';\n\nconst MAX_RATING = 5;\n\nexport function transformRating(rating) {\n  const result = (Math.round(rating)*100)/MAX_RATING;\n  return `${result}%`;\n}\n\nexport function sortByDate(commentA, commentB) {\n  return dayjs(commentB.date).diff(commentA.date);\n}\n\nexport function sortPriceHighToLow(offerA, offerB) {\n  return offerB.price - offerA.price;\n}\n\nexport function sortPriceLowToHigh(offerA, offerB) {\n  return offerA.price - offerB.price;\n}\n\nexport function sortRatingTop(offerA, offerB) {\n  return offerB.rating - offerA.rating;\n}\n\nexport function humanizeCommentDate(date) {\n  return `${dayjs(date).format('MMMM YYYY')}`;\n}\n\nexport const updateOfferToClient = (offer) => {\n  const updatedOffer = Object.assign(\n    {},\n    offer,\n    {\n      id: offer.id.toString(),\n      cityName: offer.city.name,\n      cityLocation: offer.city.location,\n      isFavorite: offer['is_favorite'],\n      maxAdults: offer['max_adults'],\n      host: {\n        avatarUrl: offer.host['avatar_url'],\n        id: offer.host.id.toString(),\n        isPro: offer.host['is_pro'],\n        name: offer.host.name,\n      },\n      cardImage: offer['preview_image'],\n      isPremium: offer['is_premium'],\n      location: offer.location,\n    },\n  );\n\n  delete updatedOffer.city;\n  delete updatedOffer['is_favorite'];\n  delete updatedOffer['is_premium'];\n  delete updatedOffer['max_adults'];\n  delete updatedOffer['avatar_url'];\n  delete updatedOffer['is_pro'];\n  delete updatedOffer['preview_image'];\n  delete updatedOffer['is_premium'];\n\n  return updatedOffer;\n};\n\n","export const AppRoute = {\n  LOGIN: '/login',\n  FAVORITES: '/favorites',\n  ROOT: '/',\n  OFFER: '/offer/:id',\n  PAGE_NOT_FOUND: '/page-not-found',\n};\n\nexport const CURRENT_MARKER_URL = 'img/pin-active.svg';\nexport const DEFAULT_MARKER_URL = 'img/pin.svg';\n\nexport const CITIES = [\n  'Paris',\n  'Cologne',\n  'Brussels',\n  'Amsterdam',\n  'Hamburg',\n  'Dusseldorf',\n];\n\nexport const AuthorizationStatus = {\n  AUTH: 'AUTH',\n  NO_AUTH: 'NO_AUTH',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const APIRoute = {\n  OFFERS: '/hotels',\n  LOGIN: '/login',\n  LOGOUT: '/logout',\n  COMMENTS: '/comments/',\n  FAVORITE: '/favorite',\n};\n\nexport const SortType = {\n  POPULAR: 'Popular',\n  PRICE_LOW_TO_HIGH: 'Price: low to high',\n  PRICE_HIGH_TO_LOW: 'Price: high to low',\n  TOP_RATED_FIRST: 'Top rated first',\n};\n","export const updateCommentToClient = (comment) => {\n  const updatedComment = Object.assign(\n    {},\n    comment,\n    {\n      user: {\n        avatarUrl: comment.user['avatar_url'],\n        id: comment.user.id,\n        isPro: comment.user['is_pro'],\n        name: comment.user.name,\n      },\n    },\n  );\n\n  return updatedComment;\n};\n","import React, {useState} from 'react';\nimport {useDispatch} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {changeFavorites} from '../../store/api-actions';\nimport cardProp from '../card/card.prop';\n\nfunction BookMarkButton(props) {\n  const {offer, className} = props;\n  const [isFavorite, setIsFavorite] = useState(offer.isFavorite);\n\n  const id = offer.id;\n\n  const dispatch = useDispatch();\n\n  const onClickHandle = () => {\n    dispatch(changeFavorites(id, !isFavorite ? 1 : 0));\n    setIsFavorite(!isFavorite);\n  };\n\n  return (\n    <button onClick={onClickHandle} className={`${className} ${isFavorite ? `${className}--active` : ''} button`} type=\"button\">\n      {props.children}\n    </button>\n  );\n}\n\nBookMarkButton.propTypes = {\n  offer: cardProp,\n  className: PropTypes.string,\n  children: PropTypes.any,\n};\n\nexport default BookMarkButton;\n","import {\n  loadComments,\n  loadOffers,\n  loadOffersNearBy,\n  redirectToRoute,\n  requireAuthorization,\n  sendComment,\n  setOpenedOffer,\n  setUserEmail,\n  outLog, changeFavoritesState\n} from './action';\nimport {APIRoute, AppRoute, AuthorizationStatus} from '../const';\nimport {updateOfferToClient} from '../utils/offer';\nimport {updateCommentToClient} from '../utils/comment';\n\nexport const fetchOfferList = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.OFFERS)\n    .then(({data}) => dispatch(loadOffers(data.map((item) => updateOfferToClient(item)))),\n    ));\n\nexport const fetchOffersNearBy = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.OFFERS}/${id}/nearby`)\n    .then(({data}) => dispatch(loadOffersNearBy(data.map((item) => updateOfferToClient(item)))))\n);\n\nexport const fetchOffer = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.OFFERS}/${id}`)\n    .then(({data}) => dispatch(setOpenedOffer(updateOfferToClient(data))))\n    .catch(() => dispatch(redirectToRoute(AppRoute.PAGE_NOT_FOUND)))\n);\n\nexport const fetchComments = (id, onFail) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.COMMENTS}${id}`)\n    .then(({data}) => dispatch(loadComments(data.map((item) => updateCommentToClient(item)))))\n    .catch(() => onFail())\n);\n\nexport const checkAuth = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.LOGIN)\n    .then(({data}) => dispatch(setUserEmail(data.email)))\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .catch(() => {\n    })\n);\n\nexport const postComment = (comment, offerId, onFailSendComment) => (dispatch, _getState, api) => (\n  api.post(`${APIRoute.COMMENTS}${offerId}`, comment)\n    .then(({data}) => dispatch(loadComments(data.map((item) => updateCommentToClient(item)))))\n    .then(() => dispatch(sendComment(false)))\n    .catch(() => {\n      onFailSendComment();\n      dispatch(sendComment(false));\n    })\n);\n\nexport const changeFavorites = (offerId, status) => (dispatch, _getState, api) => {\n  api.post(`${APIRoute.FAVORITE}/${offerId}/${status}`)\n    .then(({data}) => dispatch(changeFavoritesState(updateOfferToClient(data))))\n    .catch(() => dispatch(redirectToRoute(AppRoute.LOGIN)));\n};\n\nexport const login = ({login: email, password}) => (dispatch, _getState, api) => (\n  api.post(APIRoute.LOGIN, {email, password})\n    .then(({data}) => localStorage.setItem('token', data.token))\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .then(() => dispatch(setUserEmail(email)))\n    .then(() => dispatch(redirectToRoute(AppRoute.ROOT)))\n);\n\nexport const logout = () => (dispatch, _getState, api) => (\n  api.delete(APIRoute.LOGOUT)\n    .then(() => localStorage.removeItem('token'))\n    .then(() => dispatch(outLog()))\n    .then(() => dispatch(setUserEmail(null)))\n);\n","import React from 'react';\nimport {Link, useHistory} from 'react-router-dom';\nimport {useDispatch} from 'react-redux';\nimport {changeActiveOfferId} from '../../store/action';\nimport CardMark from './card-mark';\nimport cardProp from './card.prop';\nimport {transformRating} from '../../utils/offer';\nimport BookMarkButton from '../bookmark-button/bookmark-button';\n\nfunction Card({offer}) {\n  const history = useHistory();\n  const OFFER_PAGE = `/offer/${offer.id}`;\n  const {cardImage, price, rating, title, type, isPremium} = offer;\n  const ratingWidth = transformRating(rating);\n\n  const dispatch = useDispatch();\n\n  const onMouseAction = (offerId) => {\n    dispatch(changeActiveOfferId(offerId));\n  };\n\n  function onMouseOverHandle() {\n    onMouseAction(offer.id);\n  }\n\n  function onMouseOutHandle() {\n    onMouseAction(null);\n  }\n\n  function onClickHandle() {\n    history.push(OFFER_PAGE);\n  }\n\n  return (\n    <article onMouseOver={onMouseOverHandle} onMouseOut={onMouseOutHandle} className=\"cities__place-card place-card\">\n      <CardMark isPremium={isPremium}/>\n      <div className=\"cities__image-wrapper place-card__image-wrapper\">\n        <Link to={OFFER_PAGE}>\n          <img className=\"place-card__image\" src={cardImage} width=\"260\" height=\"200\" alt=\"Offer\"/>\n        </Link>\n      </div>\n      <div className=\"place-card__info\">\n        <div className=\"place-card__price-wrapper\">\n          <div className=\"place-card__price\">\n            <b className=\"place-card__price-value\">&euro;{price}</b>\n            <span className=\"place-card__price-text\">&#47;&nbsp;night</span>\n          </div>\n          <BookMarkButton className={'place-card__bookmark-button'} offer={offer}>\n            <svg className=\"place-card__bookmark-icon\" width=\"18\" height=\"19\">\n              <use xlinkHref=\"#icon-bookmark\"></use>\n            </svg>\n            <span className=\"visually-hidden\">To bookmarks</span>\n          </BookMarkButton>\n        </div>\n        <div className=\"place-card__rating rating\">\n          <div className=\"place-card__stars rating__stars\">\n            <span style={{width: ratingWidth}}></span>\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <h2 onClick={onClickHandle} className=\"place-card__name\">\n          <Link to={OFFER_PAGE}>{title}</Link>\n        </h2>\n        <p className=\"place-card__type\">{type}</p>\n      </div>\n    </article>\n  );\n}\n\nCard.propTypes = {\n  offer: cardProp,\n};\n\nexport default Card;\n","import {AuthorizationStatus} from '../const';\n\nexport function getOffersByCity (cityName, allOffers) {\n  return allOffers.filter((offer) => offer.cityName === cityName);\n}\n\nexport const isCheckedAuth = (authorizationStatus) =>\n  authorizationStatus === AuthorizationStatus.UNKNOWN;\n\nexport const findOffer = (offers, id) => offers.findIndex((element) => element.id === id);\n","import {\n  changeActiveOfferId,\n  changeCity,\n  loadOffers,\n  loadOffersNearBy,\n  setDefaultCityFilter,\n  setOpenedOffer,\n  changeFavoritesState, setSortType\n} from '../action';\nimport {createReducer} from '@reduxjs/toolkit';\nimport {findOffer} from '../../utils/common';\nimport {SortType} from '../../const';\n\nconst DEFAULT_CITY = 'Paris';\n\nconst initialState = {\n  city: DEFAULT_CITY,\n  sortType: SortType.POPULAR,\n  offers: [],\n  offersNearby: null,\n  openedOffer: null,\n  activeOfferId: null,\n  isDataLoaded: false,\n};\n\nconst offersData = createReducer(initialState, (builder) => {\n  builder\n    .addCase(changeCity, (state, action) => {\n      state.city = action.payload;\n    })\n    .addCase(setDefaultCityFilter, (state) => {\n      state.city = DEFAULT_CITY;\n    })\n    .addCase(changeActiveOfferId, (state, action) => {\n      state.activeOfferId = action.payload;\n    })\n    .addCase(loadOffers, (state, action) => {\n      state.offers = action.payload;\n      state.isDataLoaded = true;\n    })\n    .addCase(setOpenedOffer, (state, action) => {\n      state.openedOffer = action.payload;\n    })\n    .addCase(loadOffersNearBy, (state, action) => {\n      state.offersNearby = action.payload;\n    })\n    .addCase(changeFavoritesState, (state, action) => {\n      state.offers[findOffer(state.offers, action.payload.id)] = action.payload;\n    })\n    .addCase(setSortType, (state, action) => {\n      state.sortType = action.payload;\n    });\n});\n\nexport {offersData};\n\n","import {outLog, requireAuthorization, setUserEmail} from '../action';\nimport {AuthorizationStatus} from '../../const';\nimport {createReducer} from '@reduxjs/toolkit';\n\n\nconst initialState = {\n  authorizationStatus: AuthorizationStatus.UNKNOWN,\n  userEmail: null,\n};\n\nconst user = createReducer(initialState, (builder) => {\n  builder\n    .addCase(requireAuthorization, (state, action) =>{\n      state.authorizationStatus = action.payload;\n    })\n    .addCase(outLog, (state) => {\n      state.authorizationStatus = AuthorizationStatus.NO_AUTH;\n    })\n    .addCase(setUserEmail, (state, action) =>{\n      state.userEmail = action.payload;\n    });\n});\n\nexport {user};\n","import {loadComments, sendComment} from '../action';\nimport {createReducer} from '@reduxjs/toolkit';\n\nconst initialState = {\n  comments: null,\n  isCommentFormSending: false,\n};\n\nconst formProcess = createReducer(initialState, (builder) => {\n  builder\n    .addCase(sendComment, (state, action) => {\n      state.isCommentFormSending = action.payload;\n    })\n    .addCase(loadComments, (state, action) => {\n      state.comments = action.payload;\n    });\n});\n\nexport {formProcess};\n","import {combineReducers} from 'redux';\nimport {offersData} from './offers-data/offers-data';\nimport {user} from './user/user';\nimport {formProcess} from './form-process/form-process';\n\nexport const NameSpace = {\n  DATA: 'DATA',\n  FORM: 'FORM',\n  USER: 'USER',\n};\n\nexport default combineReducers({\n  [NameSpace.DATA]: offersData,\n  [NameSpace.FORM]: formProcess,\n  [NameSpace.USER]: user,\n});\n","import {NameSpace} from '../root-reducer';\nimport get from 'lodash/get';\n\nexport const getCity = (state) => get(state, `${NameSpace.DATA}.city`, null);\nexport const getOffers = (state) => get(state, `${NameSpace.DATA}.offers`, []);\nexport const getOffersNearBy = (state) => get(state, `${NameSpace.DATA}.offersNearby`, []);\nexport const getOpenedOffer = (state) => get(state, `${NameSpace.DATA}.openedOffer`, null);\nexport const getActiveOfferId = (state) => get(state, `${NameSpace.DATA}.activeOfferId`, null);\nexport const getIsDataLoaded = (state) => get(state, `${NameSpace.DATA}.isDataLoaded`, false);\nexport const getSortType = (state) => get(state, `${NameSpace.DATA}.sortType`, null);\n","import React from 'react';\n\nfunction EmptyList() {\n  return (\n    <div className=\"cities__places-container cities__places-container--empty container\">\n      <section className=\"cities__no-places\">\n        <div className=\"cities__status-wrapper tabs__content\">\n          <b className=\"cities__status\">No places to stay available</b>\n          <p className=\"cities__status-description\">We could not find any property available at the moment in Dusseldorf</p>\n        </div>\n      </section>\n      <div className=\"cities__right-section\"></div>\n    </div>\n  );\n}\n\nexport default EmptyList;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport Card from './card';\nimport {getOffersByCity} from '../../utils/common';\nimport {getCity, getOffers, getSortType} from '../../store/offers-data/selectors';\nimport {SortType} from '../../const';\nimport {sortPriceHighToLow, sortPriceLowToHigh, sortRatingTop} from '../../utils/offer';\nimport EmptyList from '../empty-list/empty-list';\n\nfunction CardList() {\n  const offers = useSelector(getOffers);\n  const city = useSelector(getCity);\n  const sortType = useSelector(getSortType);\n\n  if (city === null) {\n    return <EmptyList />;\n  }\n\n  let sortedOffers;\n\n  switch (sortType) {\n    case SortType.PRICE_LOW_TO_HIGH:\n      sortedOffers = getOffersByCity(city, offers).slice().sort(sortPriceLowToHigh);\n      break;\n    case SortType.PRICE_HIGH_TO_LOW:\n      sortedOffers = getOffersByCity(city, offers).slice().sort(sortPriceHighToLow);\n      break;\n    case SortType.TOP_RATED_FIRST:\n      sortedOffers = getOffersByCity(city, offers).slice().sort(sortRatingTop);\n      break;\n    default:\n      sortedOffers = getOffersByCity(city, offers);\n  }\n\n  return (\n    <div className=\"cities__places-list places__list tabs__content\">\n      {sortedOffers.map((offer) =>\n        <Card offer={offer} key={offer.id}/>)}\n    </div>);\n}\n\nexport default CardList;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../const';\n\nexport function Logo() {\n  return (\n    <div className=\"header__left\">\n      <Link className=\"header__logo-link header__logo-link--active\" to={AppRoute.ROOT}>\n        <img className=\"header__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"81\" height=\"41\"/>\n      </Link>\n    </div>);\n}\n","import {useState, useEffect} from 'react';\nimport leaflet from 'leaflet';\n\nfunction useMap(mapRef, location) {\n  const [map, setMap] = useState(null);\n\n  useEffect(() => {\n    if (mapRef.current !== null && map === null) {\n      const instance = leaflet.map(mapRef.current, {\n        center: {\n          lat: location.latitude,\n          lng: location.longitude,\n        },\n        zoom: location.zoom,\n      });\n\n      leaflet\n        .tileLayer(\n          'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',\n          {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n          },\n        )\n        .addTo(instance);\n\n      setMap(instance);\n    }\n  }, [mapRef, map, location]);\n\n  return map;\n}\n\nexport default useMap;\n","import React, {useRef, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport {useSelector} from 'react-redux';\nimport 'leaflet/dist/leaflet.css';\nimport leaflet from 'leaflet';\nimport useMap from '../../hooks/useMap';\nimport {DEFAULT_MARKER_URL, CURRENT_MARKER_URL} from '../../const';\nimport {getActiveOfferId} from '../../store/offers-data/selectors';\nimport cardProp from '../card/card.prop';\n\nexport function Map({offers}) {\n  const mapRef = useRef();\n  const activeOfferId = useSelector(getActiveOfferId);\n  const map = useMap(mapRef, offers[0].cityLocation);\n\n  const defaultIcon = leaflet.icon({\n    iconUrl: DEFAULT_MARKER_URL,\n    iconSize: [30, 30],\n    iconAnchor: [15, 30],\n  });\n  const currentIcon = leaflet.icon({\n    iconUrl: CURRENT_MARKER_URL,\n    iconSize: [30, 30],\n    iconAnchor: [15, 30],\n  });\n\n  useEffect(() => {\n    const markers = leaflet.layerGroup();\n\n    if (map) {\n      markers.addTo(map);\n\n      offers.forEach(({location: {latitude, longitude}, id}) => {\n        leaflet\n          .marker(\n            {\n              lat: latitude,\n              lng: longitude,\n            },\n            {\n              icon: activeOfferId === id ? currentIcon : defaultIcon,\n            },\n          )\n          .addTo(markers);\n      });\n      map.flyTo(\n        [offers[0].cityLocation.latitude, offers[0].cityLocation.longitude],\n        offers[0].cityLocation.zoom,\n      );\n    }\n\n    return () => {\n      markers.clearLayers();\n\n    };\n  }, [map, offers, activeOfferId, currentIcon, defaultIcon]);\n\n  return (\n    <div id=\"map\" ref={mapRef} style={{height: '100%'}}></div>\n  );\n}\n\nMap.propTypes = {\n  offers: PropTypes.arrayOf(cardProp),\n};\n\nexport default Map;\n","import React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {changeCity} from '../../store/action';\nimport {CITIES} from '../../const';\nimport {getCity} from '../../store/offers-data/selectors';\nimport {Link} from 'react-router-dom';\n\nfunction CitiesMenu() {\n  const cityActive = useSelector(getCity);\n\n  const dispatch = useDispatch();\n\n  const changeActiveCity = (cityName) => {\n    dispatch(changeCity(cityName));\n  };\n\n  return (\n    <div className=\"tabs\">\n      <section className=\"locations container\">\n        <ul className=\"locations__list tabs__list\">\n          {CITIES.map((item) => (\n            <li onClick={() => changeActiveCity(item)} key={item} className=\"locations__item\">\n              <Link key={item} className={`locations__item-link tabs__item ${item === cityActive ? 'tabs__item--active' : ''}`} to=\"#\">\n                <span>{item}</span>\n              </Link>\n            </li>))}\n        </ul>\n      </section>\n    </div>\n  );\n}\n\nexport default CitiesMenu;\n","import React, {useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {SortType} from '../../const';\nimport {getSortType} from '../../store/offers-data/selectors';\nimport {setSortType} from '../../store/action';\n\nfunction OffersSortForm() {\n  const [isOptionListOpened, setIsOptionListOpened] = useState(false);\n  const sortTypeKeys = Object.keys(SortType);\n\n  const sortType = useSelector(getSortType);\n\n  const dispatch = useDispatch();\n\n  const onClickOptionHandle = (type) => {\n    dispatch(setSortType(type));\n    setIsOptionListOpened(!isOptionListOpened);\n  };\n\n  const onClickTypeHandle = () => {\n    setIsOptionListOpened(!isOptionListOpened);\n  };\n\n  return (\n    <form className=\"places__sorting\" action=\"#\" method=\"get\">\n      <span style={{marginRight: '8px'}} className=\"places__sorting-caption\">Sort by</span>\n      <span onClick={onClickTypeHandle} className=\"places__sorting-type\" tabIndex=\"0\">\n        {sortType}\n        <svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\n          <use xlinkHref=\"#icon-arrow-select\"></use>\n        </svg>\n      </span>\n      <ul className={`places__options places__options--custom ${isOptionListOpened ? 'places__options--opened' : ''}`}>\n        {sortTypeKeys.map((key) => (\n          <li onClick={() => onClickOptionHandle(SortType[key])} className=\"places__option\" tabIndex=\"0\" key={SortType[key]}>{SortType[key]}</li>\n        ))}\n      </ul>\n    </form>\n  );\n}\n\nexport default OffersSortForm;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport {getOffersByCity} from '../../utils/common';\nimport {getCity, getOffers} from '../../store/offers-data/selectors';\n\nfunction OffersDescription() {\n  const offers = useSelector(getOffers);\n  const cityName = useSelector(getCity);\n\n  const filteredOffers = getOffersByCity(cityName, offers);\n  const isSingleOffer = filteredOffers.length === 1;\n\n  return (\n    <b className=\"places__found\">{`${filteredOffers.length}${isSingleOffer ? ' place': ' places'}`} to stay in {cityName}</b>);\n}\n\nexport default OffersDescription;\n","import {NameSpace} from '../root-reducer';\nimport get from 'lodash/get';\nimport {AuthorizationStatus} from '../../const';\n\nexport const getAuthorizationStatus = (state) => get(state, `${NameSpace.USER}.authorizationStatus`, AuthorizationStatus.UNKNOWN);\nexport const getUserEmail = (state) => get(state, `${NameSpace.USER}.userEmail`, null);\n","import React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {logout} from '../../store/api-actions';\nimport {Link, useHistory} from 'react-router-dom';\nimport {AuthorizationStatus} from '../../const';\nimport {AppRoute} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nfunction SignInOut() {\n  const history = useHistory();\n  const onSignInHandle = () => {\n    history.push(AppRoute.LOGIN);\n  };\n\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  const dispatch = useDispatch();\n\n  const onSignOut = () => {\n    dispatch(logout());\n  };\n\n  if (authorizationStatus  === AuthorizationStatus.NO_AUTH) {\n    return (\n      <Link onClick={onSignInHandle} className=\"header__nav-link header__nav-link--profile\" to=\"#\">\n        <div className=\"header__avatar-wrapper user__avatar-wrapper\">\n        </div>\n        <span className=\"header__login\">Sign in</span>\n      </Link>\n    );\n  }\n  return (\n    <Link onClick={onSignOut} className=\"header__nav-link\" to=\"#\">\n      <span className=\"header__signout\">Sign out</span>\n    </Link>\n  );\n}\n\nexport default SignInOut;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport {AppRoute} from '../../const';\nimport {Link} from 'react-router-dom';\nimport {getUserEmail} from '../../store/user/selectors';\n\nfunction UserName() {\n  const userEmail = useSelector(getUserEmail);\n\n  if (userEmail === null) {\n    return null;\n  }\n\n  return (\n    <Link className=\"header__nav-link header__nav-link--profile\" to={AppRoute.FAVORITES}>\n      <div className=\"header__avatar-wrapper user__avatar-wrapper\">\n      </div>\n      <span className=\"header__user-name user__name\">{userEmail}</span>\n    </Link>\n  );\n}\n\nexport default UserName;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport CardList from '../card/card-list';\nimport {Logo} from '../logo/logo';\nimport Map from '../map/map';\nimport CitiesMenu from '../cities-menu/cities-menu';\nimport OffersSortForm from '../offer-sort-form/offers-sort-form';\nimport EmptyList from '../empty-list/empty-list';\nimport OffersDescription from './offers-description';\nimport {getOffersByCity} from '../../utils/common';\nimport SignInOut from './sign-in-out';\nimport UserName from './user-name';\nimport {getCity, getOffers} from '../../store/offers-data/selectors';\n\nfunction MainPage() {\n  const allOffers = useSelector(getOffers);\n  const city = useSelector(getCity);\n\n  const offers = getOffersByCity(city, allOffers);\n\n  const isOffersEmpty = offers.length === 0;\n\n  return (\n    <div className=\"page page--gray page--main\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <Logo/>\n            <nav className=\"header__nav\">\n              <ul className=\"header__nav-list\">\n                <li className=\"header__nav-item user\">\n                  <UserName/>\n                </li>\n                <li className=\"header__nav-item\">\n                  <SignInOut/>\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </header>\n\n      <main className={`page__main page__main--index ${isOffersEmpty ? 'page__main--index-empty' : ''}`}>\n        <h1 className=\"visually-hidden\">Cities</h1>\n        <CitiesMenu/>\n        <div className=\"cities\">\n          {isOffersEmpty ? <EmptyList/> : (\n            <div className=\"cities__places-container container\">\n              <section className=\"cities__places places\">\n                <h2 className=\"visually-hidden\">Places</h2>\n                <OffersDescription/>\n                <OffersSortForm/>\n                <CardList/>\n              </section>\n              <div className=\"cities__right-section\">\n                <section className=\"cities__map map\">\n                  <Map offers={offers}/>\n                </section>\n              </div>\n            </div>)}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default MainPage;\n","import React, {useEffect, useRef} from 'react';\nimport PropTypes from 'prop-types';\n\nfunction RatingInput({onRatingChangeHandle, value, isCommentFormSending}) {\n  const inputStar = useRef();\n\n  useEffect(() => {\n    if (isCommentFormSending === false) {\n      inputStar.current.checked = false;\n    }\n  }, [isCommentFormSending]);\n\n  return (\n    <>\n      <input ref={inputStar} onChange={() => onRatingChangeHandle(value)} disabled={isCommentFormSending ? true : ''} className=\"form__rating-input visually-hidden\" name=\"rating\" value={value} id={value > 1 ? `${value}-stars` : `${value}-star`} type=\"radio\"/>\n      <label htmlFor={value > 1 ? `${value}-stars` : `${value}-star`} className=\"reviews__rating-label form__rating-label\" title=\"perfect\">\n        <svg className=\"form__star-image\" width=\"37\" height=\"33\">\n          <use xlinkHref=\"#icon-star\"></use>\n        </svg>\n      </label>\n    </>\n  );\n}\n\nRatingInput.propTypes = {\n  onRatingChangeHandle: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n  isCommentFormSending: PropTypes.bool.isRequired,\n};\n\nexport default RatingInput;\n","import {NameSpace} from '../root-reducer';\nimport get from 'lodash/get';\n\nexport const getComments = (state) => get(state, `${NameSpace.FORM}.comments`, []);\nexport const getIsCommentFormSending = (state) => get(state, `${NameSpace.FORM}.isCommentFormSending`, true);\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {postComment} from '../../store/api-actions';\nimport {sendComment} from '../../store/action';\nimport RatingInput from './rating-input';\nimport {getIsCommentFormSending} from '../../store/form-process/selectors';\nimport swal from 'sweetalert';\n\nfunction CommentForm({offerId}) {\n  const [rating, setRating] = useState(null);\n  const [text, setText] = useState('');\n\n  const MIN_TEXT_LENGTH = 50;\n  const MAX_TEXT_LENGTH = 300;\n  const RATING_VALUES = [5, 4, 3, 2, 1];\n  const ON_FAIL_MESSAGE = '     ';\n\n  const isCommentFormSending = useSelector(getIsCommentFormSending);\n\n  const dispatch = useDispatch();\n\n  const sendFormData = (comment, id, onFailAction) => {\n    dispatch(sendComment(true));\n    dispatch(postComment(comment, id, onFailAction));\n  };\n\n  useEffect(() => {\n    if (isCommentFormSending === false) {\n      setRating(null);\n      setText('');\n    }\n  }, [isCommentFormSending]);\n\n\n  function onRatingChangeHandle(value) {\n    setRating(value);\n  }\n\n  function handleTextChange(evt) {\n    setText(evt.target.value);\n  }\n\n  function onFail() {\n    swal(ON_FAIL_MESSAGE);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    sendFormData({comment: text, rating: rating}, offerId, () => onFail());\n  }\n\n  const isFormReadyToSend = !isCommentFormSending &&\n    rating !== null &&\n    String(text).trim().length >= MIN_TEXT_LENGTH &&\n    String(text).trim().length <= MAX_TEXT_LENGTH;\n\n\n  return (\n    <form onSubmit={handleSubmit} className=\"reviews__form form\" action=\"#\" method=\"post\">\n      <label className=\"reviews__label form__label\" htmlFor=\"review\">Your review</label>\n      <div className=\"reviews__rating-form form__rating\">\n        {RATING_VALUES.map((item) =>\n          <RatingInput isCommentFormSending={isCommentFormSending} value={item} onRatingChangeHandle={onRatingChangeHandle} key={item}/>)}\n      </div>\n      <textarea value={text} onChange={handleTextChange} disabled={isCommentFormSending ? true : ''} className=\"reviews__textarea form__textarea\" id=\"review\" name=\"review\" placeholder=\"Tell how was your stay, what you like and what can be improved\">\n      </textarea>\n      <div className=\"reviews__button-wrapper\">\n        <p className=\"reviews__help\">\n          To submit review please make sure to set <span className=\"reviews__star\">rating</span> and\n          describe your stay with at least <b className=\"reviews__text-amount\">50 characters</b>.\n        </p>\n        <button className=\"reviews__submit form__submit button\" type=\"submit\" disabled={!isFormReadyToSend}>Submit\n        </button>\n      </div>\n    </form>);\n}\n\nCommentForm.propTypes = {\n  offerId: PropTypes.string.isRequired,\n};\n\nexport default CommentForm;\n","import React from 'react';\n\nfunction LoadingScreen() {\n  return (\n    <p>Loading ...</p>\n  );\n}\n\nexport default LoadingScreen;\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  comment: PropTypes.string.isRequired,\n  date:PropTypes.string.isRequired,\n  rating: PropTypes.number.isRequired,\n  user: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired,\n    isPro: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n});\n","import React from 'react';\nimport offerScreenProp from './offer-screen.prop';\nimport {humanizeCommentDate, transformRating} from '../../utils/offer';\n\nexport function ReviewsItem({commentItem}) {\n  const {comment, date, rating, user} = commentItem;\n  const {avatarUrl, name} = user;\n  const ratingForStyle = transformRating(rating);\n\n  return (\n    <li className=\"reviews__item\">\n      <div className=\"reviews__user user\">\n        <div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\n          <img className=\"reviews__avatar user__avatar\" src={avatarUrl} width=\"54\" height=\"54\" alt=\"Reviews avatar\"/>\n        </div>\n        <span className=\"reviews__user-name\">{name}</span>\n      </div>\n      <div className=\"reviews__info\">\n        <div className=\"reviews__rating rating\">\n          <div className=\"reviews__stars rating__stars\">\n            <span style={{width: ratingForStyle}}></span>\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <p className=\"reviews__text\">\n          {comment}\n        </p>\n        <time className=\"reviews__time\" dateTime={date}>{humanizeCommentDate(date)}</time>\n      </div>\n    </li>\n  );\n}\n\nReviewsItem.propTypes = {\n  commentItem: offerScreenProp,\n};\n","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {ReviewsItem} from '../offer-screen/reviews-item';\nimport {sortByDate} from '../../utils/offer';\nimport {fetchComments} from '../../store/api-actions';\nimport {getComments, getIsCommentFormSending} from '../../store/form-process/selectors';\nimport {getOpenedOffer} from '../../store/offers-data/selectors';\nimport swal from 'sweetalert';\n\nfunction CommentsList() {\n  const ON_FAIL_MESSAGE = '  ';\n\n  const comments = useSelector(getComments);\n  const isCommentFormSending = useSelector(getIsCommentFormSending);\n  const openedOffer = useSelector(getOpenedOffer);\n\n  const dispatch = useDispatch();\n\n  const onFailHandle = () => {\n    swal(ON_FAIL_MESSAGE);\n  };\n\n  const loadComments = (offerId, onFail) => {\n    dispatch(fetchComments(offerId, onFail));\n  };\n\n  useEffect(() => {\n    if (isCommentFormSending === false) {\n      loadComments(openedOffer.id, onFailHandle);\n    }\n  });\n\n  if (comments === null) {\n    return null;\n  }\n\n  const resultComments = comments.slice().sort(sortByDate);\n\n  return (\n    <>\n      <h2 className=\"reviews__title\">\n        Reviews &middot;\n        <span className=\"reviews__amount\">{comments.length}</span>\n      </h2>\n      <ul className=\"reviews__list\">\n        {resultComments.map((comment) => (\n          <ReviewsItem commentItem={comment} key={comment.id}/>))}\n      </ul>\n    </>\n  );\n}\n\nexport default CommentsList;\n","import React from 'react';\nimport {transformRating} from '../../utils/offer';\nimport {Link, useHistory} from 'react-router-dom';\nimport cardProp from './card.prop';\nimport BookMarkButton from '../bookmark-button/bookmark-button';\n\nexport function NearPlaceCard({offer}) {\n  const history = useHistory();\n  const OFFER_PAGE = `/offer/${offer.id}`;\n  const {cardImage, price, rating, title, type} = offer;\n  const ratingWidth = transformRating(rating);\n\n  function onClickHandle() {\n    history.push(OFFER_PAGE);\n  }\n\n  return (\n    <article className=\"near-places__card place-card\">\n      <div className=\"near-places__image-wrapper place-card__image-wrapper\">\n        <Link to={OFFER_PAGE}>\n          <img className=\"place-card__image\" src={cardImage} width=\"260\" height=\"200\" alt=\"Place\"/>\n        </Link>\n      </div>\n      <div className=\"place-card__info\">\n        <div className=\"place-card__price-wrapper\">\n          <div className=\"place-card__price\">\n            <b className=\"place-card__price-value\">&euro;{price}</b>\n            <span className=\"place-card__price-text\">&#47;&nbsp;night</span>\n          </div>\n          <BookMarkButton className={'place-card__bookmark-button'} offer={offer}>\n            <svg className=\"place-card__bookmark-icon\" width=\"18\" height=\"19\">\n              <use xlinkHref=\"#icon-bookmark\"></use>\n            </svg>\n            <span className=\"visually-hidden\">To bookmarks</span>\n          </BookMarkButton>\n        </div>\n        <div className=\"place-card__rating rating\">\n          <div className=\"place-card__stars rating__stars\">\n            <span style={{width: ratingWidth}}></span>\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <h2 onClick={onClickHandle} className=\"place-card__name\">\n          <Link to={OFFER_PAGE}>{title}</Link>\n        </h2>\n        <p className=\"place-card__type\">{type}</p>\n      </div>\n    </article>\n  );\n}\n\nNearPlaceCard.propTypes = {\n  offer: cardProp,\n};\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport {NearPlaceCard} from '../card/near-place-card';\nimport {getOffersNearBy} from '../../store/offers-data/selectors';\n\nfunction NearbyOffersList() {\n  const offersNearby = useSelector(getOffersNearBy);\n\n  if (!Array.isArray(offersNearby)) {\n    return null;\n  }\n\n  return (\n    <div className=\"container\">\n      <section className=\"near-places places\">\n        <h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\n        <div className=\"near-places__list places__list\">\n          {offersNearby.map((offer) => <NearPlaceCard key={offer.id} offer={offer} />)}\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default NearbyOffersList;\n","import React, {useEffect} from 'react';\nimport {useParams} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {transformRating} from '../../utils/offer';\nimport {nanoid} from 'nanoid';\nimport {Logo} from '../logo/logo';\nimport CommentForm from '../comment-form/comment-form';\nimport UserName from '../main-page/user-name';\nimport SignInOut from '../main-page/sign-in-out';\nimport {fetchOffer, fetchOffersNearBy} from '../../store/api-actions';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport {changeActiveOfferId, setOpenedOffer} from '../../store/action';\nimport CommentsList from '../comments-list.jsx/comments-list';\nimport {AuthorizationStatus} from '../../const';\nimport NearbyOffersList from '../nearby-offers-list/nearby-offers-list';\nimport {getOffersNearBy, getOpenedOffer} from '../../store/offers-data/selectors';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\nimport {loadComments as loadComentsToState} from '../../store/action';\nimport BookMarkButton from '../bookmark-button/bookmark-button';\nimport Map from '../map/map';\n\nfunction OfferScreen() {\n  const {id} = useParams();\n\n  const openedOffer = useSelector(getOpenedOffer);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const offersNearby = useSelector(getOffersNearBy);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const getOffer = (offerId) => {\n      dispatch(fetchOffer(offerId));\n    };\n\n    const loadOffersNearBy = (offerId) => {\n      dispatch(fetchOffersNearBy(id));\n    };\n\n\n    const resetOpenedOffer = () => {\n      dispatch(setOpenedOffer(null));\n    };\n\n    const resetComments = () => {\n      dispatch(loadComentsToState(null));\n    };\n\n    const setActiveOffer = (offerId) => {\n      dispatch(changeActiveOfferId(offerId));\n    };\n\n    getOffer(id);\n    setActiveOffer(id);\n    loadOffersNearBy(id);\n\n    return () => {\n      resetOpenedOffer();\n      resetComments();\n    };\n  }, [id, dispatch]);\n\n  if (openedOffer === null || offersNearby === null) {\n    return (\n      <LoadingScreen/>\n    );\n  }\n\n  const offersMap = offersNearby.concat(openedOffer);\n\n  const {\n    images,\n    description,\n    bedrooms,\n    maxAdults,\n    goods,\n    host,\n    price,\n    rating,\n    title,\n    type,\n    isPremium,\n  } = openedOffer;\n\n  const ratingWidth = transformRating(rating);\n  const {avatarUrl, isPro, name} = host;\n  const isAuthorized = authorizationStatus === AuthorizationStatus.AUTH;\n\n  return (\n    <div className=\"page\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <Logo/>\n            <nav className=\"header__nav\">\n              <ul className=\"header__nav-list\">\n                <li className=\"header__nav-item user\">\n                  <UserName/>\n                </li>\n                <li className=\"header__nav-item\">\n                  <SignInOut/>\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"page__main page__main--property\">\n        <section className=\"property\">\n          <div className=\"property__gallery-container container\">\n            <div className=\"property__gallery\">\n              {images.map((image) => (\n                <div key={nanoid()} className=\"property__image-wrapper\">\n                  <img className=\"property__image\" src={image} alt=\"Studio\"/>\n                </div>))}\n            </div>\n          </div>\n          <div className=\"property__container container\">\n            <div className=\"property__wrapper\">\n              {isPremium && (\n                <div className=\"property__mark\">\n                  <span>Premium</span>\n                </div>)}\n              <div className=\"property__name-wrapper\">\n                <h1 className=\"property__name\">\n                  {title}\n                </h1>\n                <BookMarkButton className={'property__bookmark-button'} offer={openedOffer}>\n                  <svg className=\"property__bookmark-icon\" width=\"31\" height=\"33\">\n                    <use xlinkHref=\"#icon-bookmark\"></use>\n                  </svg>\n                  <span className=\"visually-hidden\">To bookmarks</span>\n                </BookMarkButton>\n              </div>\n              <div className=\"property__rating rating\">\n                <div className=\"property__stars rating__stars\">\n                  <span style={{width: ratingWidth}}></span>\n                  <span className=\"visually-hidden\">Rating</span>\n                </div>\n                <span className=\"property__rating-value rating__value\">{rating}</span>\n              </div>\n              <ul className=\"property__features\">\n                <li className=\"property__feature property__feature--entire\">\n                  {type}\n                </li>\n                <li className=\"property__feature property__feature--bedrooms\">\n                  {bedrooms === 1 ? `${bedrooms} Bedroom` : `${bedrooms} Bedrooms`}\n                </li>\n                <li className=\"property__feature property__feature--adults\">\n                  Max {maxAdults === 1 ? `${maxAdults} adult` : `${maxAdults} adults`}\n                </li>\n              </ul>\n              <div className=\"property__price\">\n                <b className=\"property__price-value\">&euro;{price}</b>\n                <span className=\"property__price-text\">&nbsp;night</span>\n              </div>\n              <div className=\"property__inside\">\n                <h2 className=\"property__inside-title\">What&apos;s inside</h2>\n                <ul className=\"property__inside-list\">\n                  {goods.map((good) => (\n                    <li key={nanoid()} className=\"property__inside-item\">\n                      {good}\n                    </li>))}\n                </ul>\n              </div>\n              <div className=\"property__host\">\n                <h2 className=\"property__host-title\">Meet the host</h2>\n                <div className=\"property__host-user user\">\n                  <div className={isPro ? 'property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper' : 'property__avatar-wrapper user__avatar-wrapper'}>\n                    <img className=\"property__avatar user__avatar\" src={avatarUrl} width=\"74\" height=\"74\" alt=\"Host avatar\"/>\n                  </div>\n                  <span className=\"property__user-name\">\n                    {name}\n                  </span>\n                  <span className=\"property__user-status\">\n                    {isPro ? 'Pro' : ''}\n                  </span>\n                </div>\n                <div className=\"property__description\">\n                  <p className=\"property__text\">\n                    {description}\n                  </p>\n                </div>\n              </div>\n              <section className=\"property__reviews reviews\">\n                <CommentsList/>\n                {isAuthorized && <CommentForm offerId={id}/>}\n              </section>\n            </div>\n          </div>\n          <section className=\"property__map map\">\n            <Map offers={offersMap}/>\n          </section>\n        </section>\n        <NearbyOffersList/>\n      </main>\n    </div>\n  );\n}\n\nexport default OfferScreen;\n","import React from 'react';\nimport {Logo} from '../logo/logo';\nimport {Link} from 'react-router-dom';\n\nfunction NotFoundScreen() {\n  return (\n    <div className=\"page page--gray page--main\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <Logo />\n            <nav className=\"header__nav\">\n              <ul className=\"header__nav-list\">\n                <li className=\"header__nav-item user\">\n                  <Link className=\"header__nav-link header__nav-link--profile\" to=\"#\">\n                    <div className=\"header__avatar-wrapper user__avatar-wrapper\">\n                    </div>\n                    <span className=\"header__user-name user__name\">Oliver.conner@gmail.com</span>\n                  </Link>\n                </li>\n                <li className=\"header__nav-item\">\n                  <Link className=\"header__nav-link\" to=\"#\">\n                    <span className=\"header__signout\">Sign out</span>\n                  </Link>\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </header>\n      <section className=\"game__screen\">\n        <h1>404. Page not found</h1>\n        <a href=\"/\">  </a>\n      </section>\n    </div>\n  );\n}\n\nexport default NotFoundScreen;\n","import React from 'react';\n\nfunction EmptyFavoriteList() {\n  return (\n    <section className=\"favorites favorites--empty\">\n      <h1 className=\"visually-hidden\">Favorites (empty)</h1>\n      <div className=\"favorites__status-wrapper\">\n        <b className=\"favorites__status\">Nothing yet saved.</b>\n        <p className=\"favorites__status-description\">\n          Save properties to narrow down search or plan your future trips.\n        </p>\n      </div>\n    </section>\n  );\n}\n\nexport default EmptyFavoriteList;\n","import React from 'react';\nimport cardProp from './card.prop';\nimport {transformRating} from '../../utils/offer';\nimport {Link, useHistory} from 'react-router-dom';\nimport BookMarkButton from '../bookmark-button/bookmark-button';\n\nfunction FavoriteCard({offer}) {\n  const history = useHistory();\n  const {cardImage, price, rating, title, type} = offer;\n  const OFFER_PAGE = `/offer/${offer.id}`;\n  const ratingWidth = transformRating(rating);\n\n  function onClickHandle() {\n    history.push(OFFER_PAGE);\n  }\n\n  return (\n    <article className=\"favorites__card place-card\">\n      <div className=\"favorites__image-wrapper place-card__image-wrapper\">\n        <Link to={OFFER_PAGE}>\n          <img className=\"place-card__image\" src={cardImage} width=\"150\" height=\"110\" alt=\"Place\"/>\n        </Link>\n      </div>\n      <div className=\"favorites__card-info place-card__info\">\n        <div className=\"place-card__price-wrapper\">\n          <div className=\"place-card__price\">\n            <b className=\"place-card__price-value\">&euro;{price}</b>\n            <span className=\"place-card__price-text\">&#47;&nbsp;night</span>\n          </div>\n          <BookMarkButton className={'place-card__bookmark-button'} offer={offer}>\n            <svg className=\"place-card__bookmark-icon\" width=\"18\" height=\"19\">\n              <use xlinkHref=\"#icon-bookmark\"></use>\n            </svg>\n            <span className=\"visually-hidden\">In bookmarks</span>\n          </BookMarkButton>\n        </div>\n        <div className=\"place-card__rating rating\">\n          <div className=\"place-card__stars rating__stars\">\n            <span style={{width: ratingWidth}}></span>\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <h2 onClick={onClickHandle} className=\"place-card__name\">\n          <Link to={OFFER_PAGE}>{title}</Link>\n        </h2>\n        <p className=\"place-card__type\">{type}</p>\n      </div>\n    </article>);\n}\n\nFavoriteCard.propTypes = {\n  offer: cardProp,\n};\n\nexport {FavoriteCard};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {FavoriteCard} from '../card/favorite-card';\nimport CardProp from '../card/card.prop';\nimport {Link} from 'react-router-dom';\n\nfunction getCityFavoriteOffers(cityName, favoriteOffers) {\n  const resultFavoriteOffers = favoriteOffers.filter(((item) => item.cityName === cityName));\n  return resultFavoriteOffers.map((offer) => <FavoriteCard offer={offer} key={offer.id}/>);\n}\n\nfunction FavoritesList({favoriteOffers}) {\n\n  const cityNames = Array.from(new Set(favoriteOffers.map((item) => item.cityName)));\n\n  return (\n    <section className=\"favorites\">\n      <h1 className=\"favorites__title\">Saved listing</h1>\n      <ul className=\"favorites__list\">\n        {cityNames.map((cityName) => (\n          <li key={cityName} className=\"favorites__locations-items\">\n            <div className=\"favorites__locations locations locations--current\">\n              <div className=\"locations__item\">\n                <Link className=\"locations__item-link\" to=\"#\">\n                  <span>{cityName}</span>\n                </Link>\n              </div>\n            </div>\n            <div className=\"favorites__places\">\n              {getCityFavoriteOffers(cityName, favoriteOffers)}\n            </div>\n          </li>))}\n      </ul>\n    </section>\n  );\n}\n\nFavoritesList.propTypes = {\n  favoriteOffers: PropTypes.arrayOf(CardProp),\n};\n\nexport default FavoritesList;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport {Logo} from '../logo/logo';\nimport UserName from '../main-page/user-name';\nimport EmptyFavoriteList from './empty-favorite-list';\nimport FavoritesList from './favorites-list';\nimport SignInOut from '../main-page/sign-in-out';\nimport {getOffers} from '../../store/offers-data/selectors';\nimport {AppRoute} from '../../const';\nimport {Link} from 'react-router-dom';\n\nfunction FavoritesScreen() {\n  const offers = useSelector(getOffers);\n  const favoriteOffers = offers.filter((item) => item.isFavorite);\n  const isEmptyFavoriteOffers = favoriteOffers.length === 0;\n\n\n  return (\n    <div className=\"page\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <Logo/>\n            <nav className=\"header__nav\">\n              <ul className=\"header__nav-list\">\n                <li className=\"header__nav-item user\">\n                  <UserName />\n                </li>\n                <li className=\"header__nav-item\">\n                  <SignInOut />\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"page__main page__main--favorites\">\n        <div className=\"page__favorites-container container\">\n          {isEmptyFavoriteOffers && <EmptyFavoriteList />}\n          {!isEmptyFavoriteOffers && <FavoritesList favoriteOffers={favoriteOffers}/>}\n        </div>\n      </main>\n      <footer className=\"footer container\">\n        <Link className=\"footer__logo-link\" to={AppRoute.ROOT}>\n          <img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"64\" height=\"33\"/>\n        </Link>\n      </footer>\n    </div>\n  );\n}\n\nexport default FavoritesScreen;\n","import React, {useRef, useState} from 'react';\nimport {useDispatch} from 'react-redux';\nimport {login} from '../../store/api-actions';\nimport {Logo} from '../logo/logo';\nimport SignInOut from '../main-page/sign-in-out';\nimport {Link} from 'react-router-dom';\n\nfunction AuthScreen() {\n  const MIN_PASSWORD_LENGTH = 1;\n  const [password, setPassword] = useState('');\n\n  const loginRef = useRef();\n\n  const isFormReadyToSend = String(password).trim().length >= MIN_PASSWORD_LENGTH;\n\n  const onChangePasswordHandle = (evt) => {\n    setPassword(evt.target.value);\n  };\n\n  const dispatch = useDispatch();\n\n  const onSubmit = (authData) => {\n    dispatch(login(authData));\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onSubmit({\n      login: loginRef.current.value,\n      password: password,\n    });\n  };\n\n  return (\n    <div className=\"page page--gray page--login\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <Logo/>\n            <nav className=\"header__nav\">\n              <ul className=\"header__nav-list\">\n                <li className=\"header__nav-item user\">\n                  <SignInOut />\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </header>\n      <main className=\"page__main page__main--login\">\n        <div className=\"page__login-container container\">\n          <section className=\"login\">\n            <h1 className=\"login__title\">Sign in</h1>\n            <form onSubmit={handleSubmit} className=\"login__form form\" action=\"#\" method=\"post\">\n              <div className=\"login__input-wrapper form__input-wrapper\">\n                <label className=\"visually-hidden\">E-mail</label>\n                <input ref={loginRef} className=\"login__input form__input\" type=\"email\" name=\"email\" placeholder=\"Email\" required=\"\"/>\n              </div>\n              <div className=\"login__input-wrapper form__input-wrapper\">\n                <label className=\"visually-hidden\">Password</label>\n                <input value={password} onChange={onChangePasswordHandle} className=\"login__input form__input\" type=\"password\" name=\"password\" placeholder=\"Password\" required=\"\"/>\n              </div>\n              <button className=\"login__submit form__submit button\" type=\"submit\" disabled={!isFormReadyToSend}>Sign in</button>\n            </form>\n          </section>\n          <section className=\"locations locations--login locations--current\">\n            <div className=\"locations__item\">\n              <Link className=\"locations__item-link\" to=\"#\">\n                <span>Amsterdam</span>\n              </Link>\n            </div>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default AuthScreen;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Redirect} from 'react-router-dom';\nimport {useSelector} from 'react-redux';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\n\nfunction PrivateRouteFavorites({render, path, exact}) {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(routeProps) => (\n        authorizationStatus === AuthorizationStatus.AUTH\n          ? render(routeProps)\n          : <Redirect to={AppRoute.LOGIN} />\n      )}\n    />\n  );\n}\n\nPrivateRouteFavorites.propTypes = {\n  exact: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default PrivateRouteFavorites;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Redirect} from 'react-router-dom';\nimport {useSelector} from 'react-redux';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\n\nfunction PrivateRouteLogin({render, path, exact}) {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(routeProps) => (\n        authorizationStatus === AuthorizationStatus.AUTH\n          ? <Redirect to={AppRoute.ROOT} />\n          : render(routeProps)\n      )}\n    />\n  );\n}\n\nPrivateRouteLogin.propTypes = {\n  exact: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default PrivateRouteLogin;\n","import React from 'react';\nimport {Router as BrowserRouter, Route, Switch} from 'react-router-dom';\nimport {useSelector} from 'react-redux';\nimport MainPage from '../main-page/main-page';\nimport OfferScreen from '../offer-screen/offer-screen';\nimport NotFoundScreen from '../not-found-screen/not-found-screen';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport {AppRoute} from '../../const';\nimport FavoritesScreen from '../favorites-screen/favorites-screen';\nimport {isCheckedAuth} from '../../utils/common';\nimport AuthScreen from '../auth-screen/auth-screen';\nimport PrivateRouteFavorites from '../private-route-favorites/private-route-favorites';\nimport browserHistory from '../../browser-history';\nimport {getIsDataLoaded} from '../../store/offers-data/selectors';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\nimport PrivateRouteLogin from '../private-route-login/private-route-login';\n\nfunction App(props) {\n\n  const isDataLoaded = useSelector(getIsDataLoaded);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n\n  if (isCheckedAuth(authorizationStatus) || !isDataLoaded) {\n    return (\n      <LoadingScreen/>\n    );\n  }\n\n  return (\n    <BrowserRouter history={browserHistory}>\n      <Switch>\n        <Route exact path={AppRoute.ROOT}>\n          <MainPage/>\n        </Route>\n        <PrivateRouteLogin\n          exact\n          path={AppRoute.LOGIN}\n          render={() => <AuthScreen/>}\n        >\n        </PrivateRouteLogin>\n        <PrivateRouteFavorites\n          exact\n          path={AppRoute.FAVORITES}\n          render={() => <FavoritesScreen/>}\n        >\n        </PrivateRouteFavorites>\n        <Route exact path={AppRoute.FAVORITES}>\n          <FavoritesScreen/>\n        </Route>\n        <Route exact path={AppRoute.OFFER}>\n          <OfferScreen {...props}/>\n        </Route>\n        <Route>\n          <NotFoundScreen/>\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {configureStore} from '@reduxjs/toolkit';\nimport {redirect} from './store/middlewares/redirect';\nimport {createApi} from './services/api';\nimport App from './components/app/app';\nimport rootReducer from './store/root-reducer';\nimport {fetchOfferList, checkAuth} from './store/api-actions';\nimport {requireAuthorization} from './store/action';\nimport {AuthorizationStatus} from './const';\n\nconst api = createApi(\n  () => store.dispatch(requireAuthorization(AuthorizationStatus.NO_AUTH)),\n);\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }).concat(redirect),\n});\n\nstore.dispatch(checkAuth());\nstore.dispatch(fetchOfferList());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'));\n"],"sourceRoot":""}